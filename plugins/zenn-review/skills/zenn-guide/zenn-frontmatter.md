# Zenn フロントマター・config.yaml 仕様

## 記事フロントマター

記事ファイル（`articles/<slug>.md`）の先頭に YAML フロントマターを記述する。

### 必須フィールド

| フィールド | 型 | 説明 | 制約 |
|-----------|-----|------|------|
| `title` | string | 記事タイトル | 空文字不可、60文字以内推奨（70文字超で警告） |
| `emoji` | string | アイキャッチ絵文字 | 絵文字1文字のみ |
| `type` | string | 記事タイプ | `"tech"` または `"idea"` のみ |
| `topics` | list | トピックタグ | 1〜5個、各タグは小文字英数字・ハイフンのみ |
| `published` | boolean | 公開状態 | `true` または `false` |

### 任意フィールド

| フィールド | 型 | 説明 | 制約 |
|-----------|-----|------|------|
| `publication_name` | string | パブリケーション名 | 所属するパブリケーションのslug |
| `published_at` | string | 公開日時 | ISO 8601形式（例: `2024-01-15 09:00`） |

### フロントマターの構文

```yaml
---
title: "タイトル"
emoji: "🎉"
type: "tech"
topics: ["typescript", "react"]
published: false
---
```

**注意事項:**
- `---` で開始・終了（ファイルの先頭に記述）
- `title` にコロンを含む場合はクォートで囲む
- `topics` は配列形式（`[]`）で記述
- `emoji` は絵文字1つのみ（複数文字や通常文字は不可）

## 記事スラッグの制約

ファイル名 `articles/<slug>.md` のスラッグ:
- 使用可能文字: `a-z`、`0-9`、ハイフン（`-`）、アンダースコア（`_`）
- 長さ: 12〜50文字
- 大文字は不可

## 書籍 config.yaml

書籍ディレクトリ（`books/<slug>/config.yaml`）に配置する設定ファイル。

### 必須フィールド

| フィールド | 型 | 説明 | 制約 |
|-----------|-----|------|------|
| `title` | string | 書籍タイトル | 空文字不可 |
| `summary` | string | 概要 | 200文字以内推奨 |
| `topics` | list | トピックタグ | 1〜5個、小文字英数字・ハイフンのみ |
| `published` | boolean | 公開状態 | `true` または `false` |
| `price` | integer | 価格 | `0`（無料）または `200`〜`5000`（100円単位） |

### 任意フィールド

| フィールド | 型 | 説明 | 制約 |
|-----------|-----|------|------|
| `chapters` | list | 章の順序 | チャプターファイル名（拡張子なし）のリスト |
| `toc_depth` | integer | 目次の深さ | `0`〜`3`（デフォルト: `0`） |

### config.yaml の例

```yaml
title: "書籍タイトル"
summary: "この書籍の概要説明"
topics:
  - typescript
  - nextjs
published: false
price: 0
chapters:
  - intro
  - setup
  - basics
  - advanced
toc_depth: 2
```

### チャプターの順序制御

1. `chapters` フィールドが指定されている場合: その順序に従う
2. `chapters` フィールドが未指定の場合: チャプターファイル名の辞書順

### チャプターファイル

- パス: `books/<slug>/<chapter-name>.md`
- フロントマター:

```yaml
---
title: "チャプタータイトル"
free: true  # 任意: 無料公開チャプターかどうか（有料書籍の場合）
---
```

- `title`: 必須（チャプターのタイトル）
- `free`: 任意（有料書籍でこのチャプターを無料公開する場合 `true`）

## バリデーションチェックリスト

### 記事

- [ ] フロントマターが `---` で正しく囲まれている
- [ ] `title` が存在し空でない
- [ ] `emoji` が絵文字1文字である
- [ ] `type` が `"tech"` または `"idea"` である
- [ ] `topics` が1〜5個の配列である
- [ ] 各トピックが小文字英数字・ハイフンのみである
- [ ] `published` が `true` または `false` である
- [ ] スラッグが12〜50文字で、使用可能文字のみである

### 書籍

- [ ] `config.yaml` が存在する
- [ ] `title` が存在し空でない
- [ ] `summary` が存在する
- [ ] `topics` が1〜5個の配列である
- [ ] `published` が `true` または `false` である
- [ ] `price` が `0` または `200`〜`5000`（100円単位）である
- [ ] `chapters` で参照されるファイルが全て存在する
- [ ] 各チャプターに `title` フロントマターが存在する
